"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),AJAX_PAYMENT_REQUEST="AJAX_PAYMENT_REQUEST",AJAX_PAYMENT_REQUEST_SUCCESS="AJAX_PAYMENT_REQUEST_SUCCESS",AJAX_PAYMENT_REQUEST_VALIDATE_FAIL="AJAX_PAYMENT_REQUEST_VALIDATE_FAIL",AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL="AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL",AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL="AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL",PayPalAuthorize=function(){function e(n,t,o){_classCallCheck(this,e),this.paypal_instance_options=Object.assign({flow:"checkout",amount:10,currency:"USD",locale:"en_US",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:{recipientName:"Scruff McGruff",line1:"1234 Main St.",line2:"Unit 1",city:"Chicago",countryCode:"US",postalCode:"60652",state:"IL",phone:"123.456.7890"}},t),this.token=n,this.base_url=o,this.initPaypal()}return _createClass(e,[{key:"initPaypal",value:function(){var e=this,n=document.getElementById("paypal-button");braintree.client.create({authorization:e.token},function(t,o){braintree.paypal.create({client:o},function(t,o){if(t)throw console.log(t),t;console.log("paypalInstance",o),n.addEventListener("click",function(){o.tokenize(e.paypal_instance_options,function(n,t){if(n)throw console.log(n),n;console.log("tokenizationPayload",t);var o=Object.assign({tokenizationPayload:JSON.stringify(t),type:AJAX_PAYMENT_REQUEST},e.paypal_instance_options);$.ajax({url:e.base_url,method:"POST",data:o,success:function(e){if(console.log(e),e.statusMsg==AJAX_PAYMENT_REQUEST_SUCCESS)return console.log(e),console.log("success payment"),void document.dispatchEvent(new CustomEvent("PAYPAL_PAYMENT_SUCCESS",{detail:e}))},error:function(e){if(e.statusMsg==AJAX_PAYMENT_REQUEST_VALIDATE_FAIL||e.statusMsg==AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL||e.statusMsg==AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL){var n="PAYPAL FAIL: see log";return console.log(n,e.data),void window.alert(n)}},complete:function(e){console.log("response from tokenizationPayload.php",e)}})})})})})}}]),e}();