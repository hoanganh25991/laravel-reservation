"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),AJAX_PAYMENT_REQUEST="AJAX_PAYMENT_REQUEST",AJAX_PAYMENT_REQUEST_SUCCESS="AJAX_PAYMENT_REQUEST_SUCCESS",AJAX_PAYMENT_REQUEST_VALIDATE_FAIL="AJAX_PAYMENT_REQUEST_VALIDATE_FAIL",AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL="AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL",AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL="AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL",PayPalAuthorize=function(){function e(n,t,a){_classCallCheck(this,e);var o=["Current endpoint support ajax call: AJAX_PAYMENT_REQUEST","Ajax dialog for 2 action: "+DIALOG_SHOW+", "+DIALOG_HAS_DATA];console.warn("Dependencies",o),this.paypal_options=Object.assign({flow:"checkout",amount:10,currency:"USD",locale:"en_US",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:{recipientName:"Scruff McGruff",line1:"1234 Main St.",line2:"Unit 1",city:"Chicago",countryCode:"US",postalCode:"60652",state:"IL",phone:"123.456.7890"}},t),this.token=n,this.base_url=a,this.initPaypal()}return _createClass(e,[{key:"initPaypal",value:function(){var e=this,n=document.getElementById("paypal-button");braintree.client.create({authorization:e.token},function(t,a){braintree.paypal.create({client:a},function(t,a){if(t)throw t;console.log("paypalInstance",a),n.addEventListener("click",function(){a.tokenize(e.paypal_options,function(n,t){if(n)throw n;console.log("tokenizationPayload",t);var a=Object.assign({tokenizationPayload:JSON.stringify(t),type:AJAX_PAYMENT_REQUEST},e.paypal_options),o=window.store;o.dispatch({type:DIALOG_SHOW}),$.ajax({url:e.base_url,method:"POST",data:a,success:function(e){switch(console.log(e),e.statusMsg){case AJAX_PAYMENT_REQUEST_SUCCESS:console.log("%c Success paypal payment","background:#FDD835"),document.dispatchEvent(new CustomEvent("PAYPAL_PAYMENT_SUCCESS",{detail:e}));break;default:console.warn("Unknown case of res.statusMsg")}},error:function(e){console.log(e.responseJSON);var n=e.responseJSON;switch(n.statusMsg){case AJAX_PAYMENT_REQUEST_VALIDATE_FAIL:case AJAX_PAYMENT_REQUEST_FIND_RESERVATION_FAIL:case AJAX_PAYMENT_REQUEST_TRANSACTION_FAIL:var t=JSON.stringify(n),a="Paypal payment fail: "+t;window.alert(a);break;default:console.warn("Unknown case of res.statusMsg")}},complete:function(e){o.dispatch({type:DIALOG_HAS_DATA})}})})})})})}}]),e}();